(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{188:function(e,t,a){e.exports=a(375)},193:function(e,t,a){},194:function(e,t,a){},208:function(e,t){},210:function(e,t){},223:function(e,t){},225:function(e,t){},253:function(e,t){},254:function(e,t){},259:function(e,t){},261:function(e,t){},285:function(e,t){},375:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(60),o=a.n(c),i=a(378),l=(a(193),a(7)),s=a(13),u=a(10),m=a(6),d=a(377),b=a(171),g=a.n(b);a(194);function p(e){var t=[];return e&&e.forEach(function(e){var a=e.value,n=e.children;t=[].concat(Object(l.a)(t),[a],Object(l.a)(p(n)))}),t}var h=function(e){var t=e.options,a=e.handleClear,c=Object(n.useState)(t),o=Object(m.a)(c,2),i=o[0],l=o[1],u=Object(n.useState)({}),b=Object(m.a)(u,2),h=b[0],f=b[1],E=Object(n.useState)(),y=Object(m.a)(E,2),v=y[0],O=y[1],S=Object(n.useState)(),w=Object(m.a)(S,2),j=w[0],x=w[1],C=Object(n.useState)(),A=Object(m.a)(C,2),k=A[0],I=A[1];r.a.useEffect(function(){l(t),x(function(e){return p(t).filter(function(t){return!e||e.includes(t)})}),I(p(t))},[t]);return r.a.createElement(d.b,{as:"form",onSubmit:function(e){return function(e){if(e.preventDefault(),!h.agency)return O({agency:"Please input an agency name"});O({});var t=j.map(function(e){return e.split(" -")[0]});fetch("https://hooks.slack.com/services/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",{method:"POST",headers:{Accept:"application/json"},body:JSON.stringify({text:" ".concat(h.agency," has submitted their stat form:, ``` ").concat(t,"``` ")})}).then(function(e){!0===e.ok&&alert("Stat categories sent successfully")}).catch(function(e){O({form:"Error submitting: ".concat(e)})})}(e)}},r.a.createElement(d.b,{py:3},r.a.createElement(d.h,{htmlFor:"agency"},"My Agency Name"),r.a.createElement(d.g,{id:"agency",name:"agency",onChange:function(e){f(Object(s.a)({},e.target.name,e.target.value))}}),v&&v.agency&&r.a.createElement(d.b,{color:"red"},v.agency)),r.a.createElement(d.b,{py:3},i.length<1&&r.a.createElement("div",null,"No stats to select."),r.a.createElement(g.a,{nodes:i,checked:j,expanded:k,optimisticToggle:!1,noCascade:!0,onCheck:function(e){return x(e)},onExpand:function(e){return I(e)},icons:{check:r.a.createElement("span",{className:"rct-icon rct-icon-check"}),uncheck:r.a.createElement("span",{className:"rct-icon rct-icon-uncheck"}),halfCheck:r.a.createElement("span",{className:"rct-icon rct-icon-half-check"}),expandClose:r.a.createElement("span",{className:"rct-icon rct-icon-expand-close"}),expandOpen:r.a.createElement("span",{className:"rct-icon rct-icon-expand-open"}),expandAll:r.a.createElement("span",{className:"rct-icon rct-icon-expand-all"}),collapseAll:r.a.createElement("span",{className:"rct-icon rct-icon-collapse-all"}),parentClose:null,parentOpen:null,leaf:null}})),r.a.createElement(d.c,null,"Submit categories"),r.a.createElement(d.c,{style:{marginLeft:10},variant:"secondary",onClick:function(){return a()},type:"button"},"Clear Checkboxes"),v&&v.form&&r.a.createElement(d.b,{color:"red"},v.form))},f=function(e){var t=e.children;return r.a.createElement(d.b,{sx:{px:4,py:"10rem",backgroundImage:"url(https://images.unsplash.com/photo-1444762908691-c8461d64d5f6?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=3300&q=80)",backgroundSize:"cover",backgroundPosition:"center",borderRadius:8,color:"white",bg:"gray",position:"relative"}},r.a.createElement(d.f,{sx:{position:"relative",zIndex:"2",textAlign:"center",fontSize:[5,6]},as:"h4"},t),r.a.createElement(d.b,{sx:{position:"absolute",top:"0px",right:"0px",left:"0px",bottom:"0px",zIndex:"1",backgroundColor:"rgb(51, 51, 51)",opacity:"0.8"}}))},E=a(26),y=a(14),v=a(53),O=a.n(v),S=a(200);"production"!==Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_SLACK_URL:"https://hooks.slack.com/services/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",REACT_APP_STAGING_GRAPHQL_URL:"http://localhost:3000/",REACT_APP_STAGE:"staging"}).NODE_STAGE&&S.config();var w={staging:{GRAPHQL_URL:"http://localhost:3000/"},production:{GRAPHQL_URL:Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_SLACK_URL:"https://hooks.slack.com/services/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",REACT_APP_STAGING_GRAPHQL_URL:"http://localhost:3000/",REACT_APP_STAGE:"staging"}).REACT_APP_PRODUCTION_GRAPHQL_URL},slackUrl:"https://hooks.slack.com/services/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"},j=Object(u.a)(Object(u.a)({},w),w.staging),x=a(38),C=a(186),A=a(187),k=a(177),I=Object(A.a)({uri:j.GRAPHQL_URL}),N=Object(k.a)(function(e,t){var a=t.headers,n=O.a.load("token");return{headers:Object(u.a)(Object(u.a)({},a),{},{Authorization:n?"Bearer ".concat(n):""})}}),L=new x.a({link:N.concat(I),cache:new C.a}),R=a(180),T=a.n(R),P=a(15),U=a.n(P);function W(){var e=Object(y.a)(["\n  query CurrentUser {\n    me {\n      id\n      email\n      name\n      role\n    }\n  }\n"]);return W=function(){return e},e}var D=function(){return"undefined"!==typeof window},H=(U()(W()),function(){return O.a.load("token")}),B=function(){return!!D()&&!!H()},$=function(){if(!D())return!1;var e=function(){if(!B())return null;var e=H();return T.a.decode(e).role}();return!!e&&"SUPER_ADMIN"===e},F=function(e){O.a.remove("token",{path:"/"}),e()},M=function(e){return e.isCurrent?{style:{color:"inherit",textDecoration:"underline"}}:null},_=function(){return r.a.createElement(d.e,{as:"nav",p:25,sx:{bg:"black",color:"white",fontWeight:"bold",justifyContent:"space-between"}},r.a.createElement(d.e,{sx:{flex:1}},r.a.createElement(d.b,{color:"white",p:2},r.a.createElement(E.a,{getProps:M,style:{color:"inherit",textDecoration:"none"},to:"/admin"},"Create Agency")),r.a.createElement(d.b,{color:"white",p:2},r.a.createElement(E.a,{getProps:M,style:{color:"inherit",textDecoration:"none"},to:"/admin/edit-agency"},"Edit Agency")),r.a.createElement(d.b,{color:"white",p:2},r.a.createElement(E.a,{getProps:M,style:{color:"inherit",textDecoration:"none"},to:"/admin/create-notifications"},"Create Notifications")),r.a.createElement(d.b,{color:"white",p:2},r.a.createElement(E.a,{getProps:M,style:{color:"inherit",textDecoration:"none"},to:"/admin/users"},"Invite Users")),r.a.createElement(d.b,{color:"white",p:2},r.a.createElement(E.a,{getProps:M,style:{color:"inherit",textDecoration:"none"},to:"/admin/activity"},"Activity"))),r.a.createElement(d.b,{p:2},r.a.createElement(d.i,{href:"/agency/stats",onClick:function(e){e.preventDefault(),F(function(){return Object(E.d)("/admin/login")})}},"Logout")))};function q(e){var t=e.withNav,a=e.bannerChildren,n=e.children,c=e.loading;return r.a.createElement(d.b,{sx:{position:"relative"}},c&&r.a.createElement(d.b,{sx:{position:"fixed",top:0,right:0}},r.a.createElement(d.k,null)),r.a.createElement(f,null,a),t&&r.a.createElement(d.b,{sx:{width:"100%"}},r.a.createElement(_,null)),r.a.createElement(d.b,{p:45,sx:{position:"relative"}},n))}var G=function(e){return e.map(function(e,t){return{label:e.category,value:"".concat(e.category," - ").concat(t),children:e.subCategories&&e.subCategories.map(function(t,a){return{label:t,value:"".concat(e.category," / ").concat(t," - ").concat(a),children:e.subSubCategories&&e.subSubCategories.map(function(n,r){return{label:n,value:"".concat(e.category," / ").concat(t," / ").concat(n," - ").concat(a+r)}})}})}})};var z=[{category:"Rescues",subCategories:["Rip Current","Surf","Pier","Rocks & Jetty","Inshore Holes","Other"],subSubCategories:["Swimmer","Apparatus","Other"]},{category:"Preventative Action",subCategories:["Rip Current","Surf","Pier","Rocks & Jetty","Inshore Holes","Other"],subSubCategories:["Swimmer","Apparatus","Other"]},{category:"Minor Medical Aid",subCategories:["Laceration","Abrasion","Fracture","Sprain or Strain","Head Neck Back Injury","Stingray","JellyFish","Other"],subSubCategories:["Skating","Surfing","Biking","Other"]},{category:"Major Medical Aid",subCategories:["Laceration","Abrasion","Fracture","Sprain or Strain","Head Neck Back Injury","Stingray","JellyFish","Other"],subSubCategories:["Skating","Surfing","Biking","Other"]},{category:"Enforcement",subCategories:["Warning","Citation","PD Assist","Arrest"],subSubCategories:["BBQ","Alcohol","Fighting","Smoking","Unsafe Beach Activity","Other"]},{category:"Missing Person",subCategories:["Child","Adult"],subSubCategories:["Lost","Found"]},{category:"Contact",subCategories:["Public Assist","Public Education","Providing Information"]},{category:"Wildlife",subCategories:["Bird","Mammal","Shark"],subSubCategories:["Live","Dead","Injured"]},{category:"Boat",subCategories:["Warning","Tow","Assist","Rescue"]},{category:"Attendance",subCategories:["Beach","Surfers","Bodyboarders","Lagoon"]}];var Q=function(){var e=Object(n.useState)(z),t=Object(m.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)({categorySelect:"All"}),i=Object(m.a)(o,2),b=i[0],g=i[1],p=function(e){g(Object(u.a)(Object(u.a)({},b),{},Object(s.a)({},e.target.name,e.target.value)))},f=function(e,t){try{var a=e.toLowerCase().split(" ").map(function(e){return e[0].toUpperCase()+e.substr(1)}).join(" ").trim();c(function(e){var n;return"category"===t?n=[].concat(Object(l.a)(e),[Object(s.a)({},t,a)]):(e.forEach(function(n,r){"All"===b.categorySelect?e[r][t]?e[r][t].push(a):e[r][t]=[a]:b.categorySelect===n.category&&(e[r][t]?e[r][t].push(a):e[r][t]=[a])}),n=e),n}),g(Object(u.a)(Object(u.a)({},b),{},Object(s.a)({},t,"")))}catch(n){console.error(n)}},E=G(a);return r.a.createElement(q,{withNav:!1,bannerChildren:"Watchtower Onboarding"},r.a.createElement(d.b,{m:2,p:5,sx:{textAlign:"center",fontWeight:"bold",bg:"blue",color:"white"}},"Please fill out the below form to get your Watchtower configured to your beach. If you have questions, please reach out to your Watchtower rep."),r.a.createElement(d.e,{py:4,sx:{flexWrap:"wrap",maxWidth:"1200px",margin:"auto"}},r.a.createElement(d.b,{sx:{width:["100%","50%"],borderBottom:"1px solid lightgray"},p:3},r.a.createElement(d.f,{pb:1},"Select Your Stat Categories"),r.a.createElement(d.l,{sx:{fontSize:13},pb:3},"Check the categories you would like to capture"),r.a.createElement(h,{options:E,handleClear:function(){c([])}})),r.a.createElement(d.e,{p:3,sx:{width:["100%","50%"],flexDirection:"column"}},r.a.createElement(d.f,{pb:1},"Custom Categories"),r.a.createElement(d.l,{fontSize:13,pb:3},"Custom categories will show in your checkbox tree"),r.a.createElement(d.e,{py:3,sx:{flexDirection:"column"}},r.a.createElement(d.b,{pb:2},r.a.createElement(d.h,null,"Add Custom Category"),r.a.createElement(d.g,{value:b.category||"",name:"category",onChange:p}),r.a.createElement(d.b,{py:2},r.a.createElement(d.c,{onClick:function(){return f(b.category,"category")}},"Add")))),r.a.createElement(d.e,{py:3,sx:{flexDirection:"column"}},r.a.createElement(d.f,{as:"h4",pb:1},"Custom SubCategories"),r.a.createElement(d.l,{fontSize:13,pb:3},"Select the category you would like your sub and sub sub categories to be added to."),r.a.createElement(d.b,{py:2},r.a.createElement(d.h,null,"Add to:"),r.a.createElement(d.j,{value:b&&b.categorySelect||"All",name:"categorySelect",onChange:p,defaultValue:"All"},r.a.createElement("option",{value:"All"},"All"),a.map(function(e,t){return r.a.createElement("option",{key:t,value:e.category},e.category)}))),r.a.createElement(d.b,{py:3},r.a.createElement(d.h,null,"SubCategory"),r.a.createElement(d.g,{value:b.subCategories||"",name:"subCategories",onChange:p}),r.a.createElement(d.b,{py:2},r.a.createElement(d.c,{onClick:function(){return f(b.subCategories,"subCategories")}},"Add"))),r.a.createElement(d.b,{pb:2},r.a.createElement(d.h,null,"SubSubCategory"),r.a.createElement(d.g,{value:b.subSubCategories||"",name:"subSubCategories",onChange:p})),r.a.createElement(d.b,null,r.a.createElement(d.c,{onClick:function(){return f(b.subSubCategories,"subSubCategories")}},"Add"))))))},J=a(8),V=a.n(J),X=a(21),Y=a(19),Z=a(80),K=a(181),ee=a.n(K),te=a(42),ae=r.a.createContext(),ne=function(e){return r.a.createElement("div",Object.assign({style:{position:"fixed",right:0,top:0,zIndex:1e3}},e))},re=function(e){var t=e.children,a=e.onDismiss,n=Object(te.a)(e,["children","onDismiss"]);return r.a.createElement(d.a,Object.assign({style:{margin:10,padding:10},onClick:a},n),t)},ce=0;function oe(e){var t=e.children,a=r.a.useState([]),n=Object(m.a)(a,2),c=n[0],o=n[1],i=function(e){var t=c.filter(function(t){return t.id!==e});o(t)},s=function(e){return function(){return i(e)}};return r.a.createElement(ae.Provider,{value:{add:function(e){var t=e.content,a=Object(te.a)(e,["content"]),n=ce++,r=Object(u.a)({content:t,id:n},a);o([].concat(Object(l.a)(c),[r]))},remove:i}},t,r.a.createElement(ne,null,c.map(function(e){var t=e.content,a=e.id,n=Object(te.a)(e,["content","id"]);return r.a.createElement(re,Object.assign({key:a,Toast:re,onDismiss:s(a)},n),t)})))}var ie=function(){return r.a.useContext(ae)};function le(e){return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}function se(e,t){return e.filter(function(e){return e.includes(t)})[0]||!1}function ue(){var e=Object(y.a)(["\n  mutation OnboardAgency($data: OnboardAgencyInput!) {\n    onboardAgency(data: $data) {\n      id\n    }\n  }\n"]);return ue=function(){return e},e}var me=U()(ue()),de=function(e){var t=e.children;return r.a.createElement(d.b,{p:25,sx:{position:"absolute",bottom:0,right:0,left:0,height:"auto",textAlign:"right"}},t)},be=function(e){var t={agencyName:e.agencyName,activities:e.stats,surflineSpotId:e.surflineSpotId};return e.users&&(t.users={create:e.users.map(function(e){return{name:e.name}})}),e.positions&&(t.positions={create:e.positions.map(function(t){return{name:t.name,dispatchable:!!e[t.name]}})}),{data:Object(u.a)({},t)}},ge=function(){var e=Object(Y.b)(me),t=Object(m.a)(e,2),a=t[0],c=t[1].loading,o=Object(n.useState)({}),i=Object(m.a)(o,2),l=i[0],b=i[1],g=Object(n.useState)(),p=Object(m.a)(g,2),h=p[0],f=p[1],E=ie().add,y=Object(Z.b)(function(){return r.a.createElement(ee.a,{isOpen:!0},r.a.createElement(d.f,{as:"h1"},"Are you sure you would like to create this agency:"),Object.keys(l).length?r.a.createElement(r.a.Fragment,null," ",r.a.createElement(d.b,{p:45},r.a.createElement(d.b,{bg:"primary",m:3,p:3,sx:{color:"white"}},r.a.createElement("strong",null,"Please review this for accuracy. It is difficule to undo a new agency.")),l.agencyName&&r.a.createElement("div",null,r.a.createElement(d.f,{as:"h3"},"Agency:"),l.agencyName),l.surflineSpotId&&r.a.createElement("div",null,r.a.createElement(d.f,{as:"h3"},"SurflineSpotId:"),l.surflineSpotId),l.stats&&r.a.createElement("div",null,r.a.createElement(d.f,{as:"h3"},"Stats:"),JSON.stringify(l.stats)),l.users&&r.a.createElement("div",null,r.a.createElement(d.f,{as:"h3"},"Users:"),JSON.stringify(l.users)),l.positions&&r.a.createElement("div",null,r.a.createElement(d.f,{as:"h3"},"Positions:"),JSON.stringify(l.positions)),r.a.createElement(d.b,{py:20},r.a.createElement("strong",null," ","In case you need Trevor to create, share this snippet:")),h?r.a.createElement("code",null,JSON.stringify(h).replace(/\"([^(\")"]+)\":/g,"$1:")):r.a.createElement(d.c,{onClick:function(){return x}},"Generate Snippet")),r.a.createElement(de,null,r.a.createElement(d.c,{sx:{marginRight:5},onClick:Object(X.a)(V.a.mark(function e(){var t;return V.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a({variables:Object(u.a)({},h)});case 3:(t=e.sent).data&&t.data.onboardAgency&&t.data.onboardAgency.id&&(E({content:"Agency created!",variant:"success"}),S()),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),E({content:e.t0.message,variant:"error"});case 10:case"end":return e.stop()}},e,null,[[0,7]])}))},c?"Creating...":"Create Agency"),r.a.createElement(d.c,{onClick:function(){return S()},variant:"secondary"},"Not yet"))):r.a.createElement(d.b,{p:45},"No values...",r.a.createElement(de,null,r.a.createElement(d.c,{onClick:function(){return S()}},"Go Back"))))},[l,h,c,E]),v=Object(m.a)(y,2),O=v[0],S=v[1];function w(e){b(Object(u.a)(Object(u.a)({},l),{},Object(s.a)({},e.target.name,!l[e.target.name])))}function j(e,t){var a;if("stats"===e.target.name&&(a=e.target.value.split(",").map(function(e){return le(e.trim())})),"positions"===e.target.name){var n=e.target.value.split(",");a=n?n.map(function(e){return{name:e&&le(e.trim()),dispatchable:!1}}):""}if("users"===e.target.name){var r=e.target.value.split(":");r[1]||(r=e.target.value.split(",")),a=r?r.map(function(e){return{name:e&&le(e.trim())}}):""}b(Object(u.a)(Object(u.a)({},l),{},Object(s.a)({},e.target.name,a||le(e.target.value))))}function x(){f(be(l))}return r.a.createElement(q,{withNav:!0,bannerChildren:"Watchtower Admin"},r.a.createElement(d.b,{sx:{maxWidth:"1200px",margin:"auto"},py:45,as:"form",onSubmit:function(e){return e.preventDefault()}},r.a.createElement(d.f,{as:"h1"},"Create an agency"),r.a.createElement(d.l,null,"Input information to create an agency"),r.a.createElement(d.b,{py:25}," ",r.a.createElement(d.h,null,"Agency Name"),r.a.createElement(d.g,{id:"agencyName",name:"agencyName",onChange:j})),r.a.createElement(d.b,{py:25}," ",r.a.createElement(d.h,null,"Surfline Spot Id"),r.a.createElement(d.b,{bg:"primary",m:3,p:3,sx:{color:"white"}},r.a.createElement("strong",null,"You can find this at the end of a surfline spot url. IT SHOULD START WITH A 5 and be around 20+ characters. Example:"),r.a.createElement("br",null),"https://www.surfline.com/surf-report/newport-beach-/5842041f4e65fad6a770882c"),r.a.createElement(d.g,{id:"surflineSpotId",name:"surflineSpotId",onChange:j})),r.a.createElement(d.b,{py:25}," ",r.a.createElement(d.h,null,"Stats"),r.a.createElement(d.b,{bg:"primary",m:3,p:3,sx:{color:"white"}},r.a.createElement("strong",null," ","Should follow this notation with each type being separated by a comma:")," ",r.a.createElement("br",null),"Rescue, Rescue / Surf / Swimmer, Boat, Boat / Tow"),r.a.createElement(d.g,{as:"textarea",name:"stats",rows:"15",style:{width:"100%"},onChange:function(e){return j(e)}})),r.a.createElement(d.b,{py:25}," ",r.a.createElement(d.h,null,"Users"),r.a.createElement(d.b,{bg:"primary",m:3,p:3,sx:{color:"white"}},r.a.createElement("strong",null," ","Should follow this notation with each type being separated by a comma or a colon (:). IF THE NAMES HAVE A COMMA, MAKE SURE YOU USE : TO SEPARATE. SEE EXAMPLE BELOW:")," ",r.a.createElement("br",null),"Trevor Heath, David Rodriguez ",r.a.createElement("br",null),r.a.createElement("strong",null,"or"),r.a.createElement("br",null)," Heath, Trevor: Rodriguez, David",r.a.createElement("br",null),"You can use this"," ",r.a.createElement("a",{href:"https://convert.town/column-to-comma-separated-list"},"website")," ","to convert a column to the correct format. The delimiter option allows you to choose a comma or colon."),r.a.createElement(d.g,{as:"textarea",name:"users",rows:"15",style:{width:"100%"},onChange:function(e){return j(e)}})),r.a.createElement(d.b,{py:25}," ",r.a.createElement(d.h,null,"Positions"),r.a.createElement(d.b,{bg:"primary",m:3,p:3,sx:{color:"white"}},r.a.createElement("strong",null,"Should follow this notation with each type being separated by a comma:")," ",r.a.createElement("br",null),"Tower 10, 5210, 5220"),r.a.createElement(d.g,{as:"textarea",name:"positions",rows:"15",style:{width:"100%"},onChange:j}),l.positions&&r.a.createElement("div",null,r.a.createElement("h4",null,"Dispatchable?"),r.a.createElement(d.b,{bg:"primary",m:3,p:3,sx:{color:"white"}},r.a.createElement("strong",null,"Check the positions that are defaulted as dispatchable, this can be editted by the user later on.")),l.positions.map(function(e,t){return r.a.createElement(d.b,null,r.a.createElement(d.h,{mb:3},r.a.createElement(d.d,{defaultChecked:!1,name:e.name,onClick:w}),e.name))}))),r.a.createElement(d.b,{py:45,sx:{width:"100%"}},r.a.createElement(d.c,{sx:{width:"100%"},onClick:function(){x(),O()}},"Create agency data"))))},pe=a(22),he=(a(327),a(328),{breakpoints:["576px","768px","992px","1200px"],colors:{white:"#fff",black:"#000",gray:["#fff","#f8f9fa","#e9ecef","#dee2e6","#ced4da","#adb5bd","#6c757d","#495057","#343a40","#212529"],blue:"#007bff",indigo:"#6610f2",purple:"#6f42c1",pink:"#e83e8c",red:"#dc3545",orange:"#fd7e14",yellow:"#ffc107",green:"#28a745",teal:"#20c997",cyan:"#17a2b8",grayDark:"#343a40",text:"#212529",background:"#fff",primary:"#007bff",secondary:"#6c757d",muted:"#dee2e6",success:"#28a745",info:"#17a2b8",warning:"#ffc107",danger:"#dc3545",light:"#f8f9fa",dark:"#343a40",textMuted:"#6c757d"},space:["0rem","0.25rem","0.5rem","1rem","1.5rem","3rem"],fonts:{body:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',heading:"inherit",monospace:'SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace',sans:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"'},fontSizes:["0.75rem","0.875rem","1rem","1.25rem","1.5rem","1.75rem","2rem","2.5rem","3.5rem","4.5rem","5.5rem","6rem"],fontWeights:{body:400,heading:500,bold:700,light:300,normal:400,display:300},lineHeights:{body:1.5,heading:1.2},sizes:{sm:540,md:720,lg:960,xl:1140},shadows:{default:"0 .5rem 1rem rgba(0, 0, 0, .15)",sm:"0 .125rem .25rem rgba(0, 0, 0, .075)",lg:"0 1rem 3rem rgba(0, 0, 0, .175)"},radii:{default:"0.25rem",sm:"0.2rem",lg:"0.3rem",pill:"50rem"},alerts:{primary:{color:"white",bg:"primary"},error:{bg:"danger"},success:{bg:"success"}},heading:{fontFamily:"heading",fontWeight:"heading",lineHeight:"heading",mt:0,mb:2},display:{fontWeight:"display",lineHeight:"heading"},forms:{label:{fontSize:1,fontWeight:"bold"}},buttons:{primary:{color:"white",bg:"primary"},link:{bg:"transparent",color:"primary"},success:{bg:"success"},secondary:{color:"black",bg:"secondary"}},styles:{root:{fontFamily:"body",lineHeight:"body",fontWeight:"body"},a:{color:"primary",textDecoration:"none",":hover":{textDecoration:"underline"}},p:{mb:3,lineHeight:"body"},h1:{fontFamily:"heading",fontWeight:"heading",lineHeight:"heading",mt:0,mb:2,fontSize:7},h2:{fontFamily:"heading",fontWeight:"heading",lineHeight:"heading",mt:0,mb:2,fontSize:6},h3:{fontFamily:"heading",fontWeight:"heading",lineHeight:"heading",mt:0,mb:2,fontSize:5},h4:{fontFamily:"heading",fontWeight:"heading",lineHeight:"heading",mt:0,mb:2,fontSize:4},h5:{fontFamily:"heading",fontWeight:"heading",lineHeight:"heading",mt:0,mb:2,fontSize:3},h6:{fontFamily:"heading",fontWeight:"heading",lineHeight:"heading",mt:0,mb:2,fontSize:2},blockquote:{fontSize:3,mb:3},table:{width:"100%",marginBottom:3,color:"gray.9",borderCollapse:"collapse"},th:{verticalAlign:"bottom",borderTopWidth:2,borderTopStyle:"solid",borderTopColor:"gray.3",borderBottomWidth:2,borderBottomStyle:"solid",borderBottomColor:"gray.3",padding:".75rem",textAlign:"inherit"},td:{borderBottomWidth:2,borderBottomStyle:"solid",borderBottomColor:"gray.3",verticalAlign:"top",padding:".75rem"},inlineCode:{color:"pink"},img:{maxWidth:"100%",height:"auto"}}}),fe=function(e){var t=e.component,a=Object(te.a)(e,["component"]);return B()&&$()?r.a.createElement(t,a):r.a.createElement(E.b,{from:"",to:"/admin/login",noThrow:!0})},Ee=function(e){var t=e.component,a=Object(te.a)(e,["component"]);return r.a.createElement(t,a)},ye=a(37);function ve(){var e=Object(y.a)(["\n  mutation login($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      token\n    }\n  }\n"]);return ve=function(){return e},e}var Oe=U()(ve()),Se=function(){var e=Object(Y.b)(Oe),t=Object(m.a)(e,2),a=t[0],c=t[1],o=c.data,i=c.loading,l=c.error,s=Object(ye.a)(),u=s.register,b=s.handleSubmit;return Object(n.useEffect)(function(){var e;B()&&Object(E.d)("/admin"),o&&o.login.token&&(e=o.login.token,O.a.save("token",e,{path:"/"}),Object(E.d)("/admin"))},[o,l]),r.a.createElement(d.e,{sx:{minHeight:"100vh",justifyContent:"center",alignItems:"center"}},r.a.createElement(d.b,{as:"form",sx:{width:"300px"},onSubmit:b(function(e){a({variables:{email:e.email,password:e.password}})})},r.a.createElement(d.b,null,r.a.createElement(d.f,{p:3,as:"h3"},"Watchower Admin"),r.a.createElement(d.b,{p:3},r.a.createElement(d.h,null,"Email Address"),r.a.createElement(d.g,{type:"email",name:"email",ref:u})),r.a.createElement(d.b,{p:3},r.a.createElement(d.h,null,"Password"),r.a.createElement(d.g,{type:"password",name:"password",ref:u})),r.a.createElement(d.b,{p:3},r.a.createElement(d.c,{block:!0,type:"submit"},i?"Logging in...":"Login"),l&&r.a.createElement(d.b,null,l.message)))))};function we(){var e=Object(y.a)(["\n  mutation InviteUser(\n    $email: String!\n    $agencyId: ID!\n    $role: Role!\n    $name: String!\n  ) {\n    sendInviteEmail(\n      email: $email\n      agencyId: $agencyId\n      role: $role\n      name: $name\n    ) {\n      success\n    }\n  }\n"]);return we=function(){return e},e}function je(){var e=Object(y.a)(["\n  query GetAgencies($where: AgencyWhereInput) {\n    agencies(where: $where) {\n      id\n      name\n    }\n  }\n"]);return je=function(){return e},e}var xe=U()(je()),Ce=U()(we());function Ae(){var e=Object(Y.b)(Ce),t=Object(m.a)(e,2),a=t[0],n=t[1].loading,c=Object(Y.c)(xe),o=c.data,i=c.loading,l=Object(ye.a)(),s=l.register,u=l.handleSubmit,b=ie().add,g=function(){var e=Object(X.a)(V.a.mark(function e(t){var n;return V.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a({variables:{email:t.email,role:t.role||"USER",name:t.name,agencyId:t.agencyId}});case 3:(n=e.sent).data&&n.data.sendInviteEmail&&n.data.sendInviteEmail.success&&b({content:"User Invited!",variant:"success"}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),b({content:e.t0.message,variant:"error"});case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(q,{withNav:!0,bannerChildren:"User Management"},r.a.createElement(d.b,{sx:{maxWidth:"1200px",margin:"auto"},py:45,as:"form",onSubmit:u(g)},r.a.createElement(d.f,{as:"h1"},"Invite Users"),r.a.createElement(d.l,null,"Invite users to agencies."),r.a.createElement(d.b,null,r.a.createElement(d.b,{py:25},r.a.createElement(d.h,null,"Agencies"),r.a.createElement(d.j,{type:"select",name:"agencyId",ref:s},i?r.a.createElement("option",null,"loading..."):o?o.agencies.map(function(e){return r.a.createElement("option",{value:e.id},e.name)}):r.a.createElement("option",null,"No agencies"))),r.a.createElement(d.b,{py:25},r.a.createElement(d.h,null,"Email Address"),r.a.createElement(d.g,{type:"select",name:"email",ref:s({required:!0})})),r.a.createElement(d.b,{py:25},r.a.createElement(d.h,null,"Name"),r.a.createElement(d.g,{name:"name",ref:s({required:!0})})),r.a.createElement(d.b,{py:25},r.a.createElement(d.h,null,"Role"),r.a.createElement(d.j,{type:"select",name:"role",ref:s},r.a.createElement("option",{value:"USER"},"User"),r.a.createElement("option",{value:"ADMIN"},"Admin"))),r.a.createElement(d.b,{py:25},r.a.createElement(d.c,{block:!0,type:"submit"},n?"Inviting in...":"Invite")))))}var ke=a(43),Ie=a.n(ke);function Ne(){var e=Object(y.a)(["\n  query GetAgencies(\n    $where: AgencyWhereInput\n    $submissionWhereInput: SubmissionWhereInput\n  ) {\n    agencies(where: $where) {\n      id\n      name\n      submissionCount(where: $submissionWhereInput)\n    }\n  }\n"]);return Ne=function(){return e},e}var Le=Ie()().subtract(7,"days"),Re=Ie()().subtract(30,"days"),Te=[{value:{startDate:Le,endDate:Ie()()},label:"Last 7 days"},{value:{startDate:Ie()().startOf("day"),endDate:Ie()()},label:"Today"},{value:{startDate:Re,endDate:Ie()().endOf("day")},label:"Last 30 days"}],Pe=U()(Ne());function Ue(){var e=Object(n.useState)(0),t=Object(m.a)(e,2),a=t[0],c=t[1],o=Object(Y.c)(Pe,{variables:{submissionWhereInput:{createdAt:{gt:Te[a].value.startDate.toISOString(),lt:Te[a].value.endDate.toISOString()}}}}),i=o.data,l=o.loading;return r.a.createElement(q,{withNav:!0,bannerChildren:"User Management"},r.a.createElement(d.b,{sx:{maxWidth:"1200px",margin:"auto"},py:45},r.a.createElement(d.f,{as:"h1"},"Agency Activity"),l?r.a.createElement(d.e,{sx:{height:"500px",width:"100%",justifyContent:"center",alignItems:"center"}},r.a.createElement(d.k,null)):r.a.createElement(d.b,null,r.a.createElement(d.b,{py:45},r.a.createElement(d.j,{id:"dateRange",value:a,onChange:function(e){c(e.target.value)}},Te.map(function(e,t){return r.a.createElement("option",{name:e.label,value:t},e.label)}))),r.a.createElement(d.b,{as:"table"},r.a.createElement(d.b,{as:"thead"},r.a.createElement(d.b,{as:"tr"},r.a.createElement(d.b,{as:"th"},"Agency Name"),r.a.createElement(d.b,{as:"th"}," Incident Count"))),r.a.createElement("tbody",null,i&&i.agencies.map(function(e){return r.a.createElement(d.b,{as:"tr"},r.a.createElement(d.b,{as:"td",p:10},e.name),r.a.createElement(d.b,{as:"td",p:10},e.submissionCount>29?"30+":e.submissionCount))}))))))}var We=a(185),De=a(81),He=a(32),Be=a(183),$e=a.n(Be);function Fe(){var e=Object(y.a)(["\n  padding: 1rem;\n  table {\n    border-spacing: 0;\n    border: 1px solid black;\n    border-radius: 4px;\n    tr {\n      :last-child {\n        td {\n          border-bottom: 0;\n        }\n      }\n    }\n    th {\n      background-color: ",";\n      text-align: left;\n      padding: 1rem;\n      color: white;\n    }\n    td {\n      margin: 0;\n      padding: 0.5rem;\n      border-bottom: 1px solid black;\n      border-right: 1px solid black;\n      :last-child {\n        border-right: 0;\n      }\n    }\n  }\n"]);return Fe=function(){return e},e}function Me(){var e=Object(y.a)(["\n  mutation ResendInvite($email: String!) {\n    resendInviteEmail(email: $email) {\n      success\n    }\n  }\n"]);return Me=function(){return e},e}function _e(){var e=Object(y.a)(["\n  mutation UpdateAgency(\n    $where: AgencyWhereUniqueInput!\n    $data: AgencyUpdateInput!\n  ) {\n    updateOneAgency(where: $where, data: $data) {\n      id\n    }\n  }\n"]);return _e=function(){return e},e}function qe(){var e=Object(y.a)(["\n  query GetAgencies($where: AgencyWhereInput) {\n    agencies(where: $where) {\n      id\n      name\n    }\n  }\n"]);return qe=function(){return e},e}function Ge(){var e=Object(y.a)(["\n  query GetAgencyDetails($id: String!) {\n    agencies(where: { id: { equals: $id } }) {\n      id\n      name\n      users {\n        id\n        name\n        email\n        role\n        isSignedUp\n      }\n      activities(orderBy: { label: asc }) {\n        id\n        label\n        subLabelOne\n        subLabelTwo\n        subLabelThree\n      }\n      settings {\n        id\n        surflineSpotId\n        dispatching\n        incidentReporting\n        epcr\n      }\n    }\n  }\n"]);return Ge=function(){return e},e}var ze=U()(Ge()),Qe=U()(qe()),Je=U()(_e()),Ve=U()(Me());function Xe(){var e=Object(n.useState)(null),t=Object(m.a)(e,2),a=t[0],c=t[1],o=Object(Y.b)(Je,{refetchQueries:["GetAgencyDetails"]}),i=Object(m.a)(o,2),s=i[0],b=i[1].loading,g=Object(Y.b)(Ve),p=Object(m.a)(g,2),h=p[0],f=p[1].loading,E=Object(Y.c)(Qe),y=E.data,v=E.loading,O=Object(Y.a)(ze),S=Object(m.a)(O,2),w=S[0],j=S[1],x=j.loading,C=j.data,A=Object(ye.a)({mode:"onChange"}),k=A.register,I=A.handleSubmit,N=A.errors,L=A.formState,R=A.reset,T=L.dirty,P=(L.isSubmitting,L.touched,L.submitCount,L.dirtyFields),U=Object(u.a)(Object(u.a)({},C&&C.agencies[0]),C&&C.agencies[0].settings),W=ie().add;Object(n.useEffect)(function(){a&&w({variables:{id:a}})},[a]);var D=Array.from(P),H=function(){var e=Object(X.a)(V.a.mark(function e(t){var n,r,c,o;return V.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(P),e.prev=1,T){e.next=5;break}return W({content:"No updates made.",variant:"error"}),e.abrupt("return");case 5:if(a){e.next=8;break}return W({content:"Please select an agency to update.",variant:"error"}),e.abrupt("return");case 8:return n={},se(D,"surflineSpotId")&&t.surflineSpotId&&(n.settings={update:{surflineSpotId:t.surflineSpotId}}),r=[],c=[],D.length>0&&$e()(D,function(e,t){return console.log(e.split(/\.(?=[^\.]+$)/)[0]===t.split(/\.(?=[^\.]+$)/)[0]),e.split(/\.(?=[^\.]+$)/)[0]===t.split(/\.(?=[^\.]+$)/)[0]}).map(function(e){if(e.includes("activities")){var a=e.split("."),n=t.activities[a[1]];if(a[1].startsWith("newLabel"))return void c.push({label:tt(n.subLabelOne,n.subLabelTwo,n.subLabelThree)});r.push({where:{id:a[1]},data:{label:tt(n.subLabelOne,n.subLabelTwo,n.subLabelThree)}})}}),r.length>0&&(n.activities={update:r}),c.length>0&&(n.activities={create:c}),e.next=17,s({variables:{where:{id:a},data:Object(u.a)({},n)}});case 17:(o=e.sent).data&&o.data.updateOneAgency&&o.data.updateOneAgency.id&&(W({content:"Agency Updated",variant:"success"}),R()),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(1),console.log(e.t0.message),W({content:e.t0.message,variant:"error"});case 25:case"end":return e.stop()}},e,null,[[1,21]])}));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(X.a)(V.a.mark(function e(t){var n;return V.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a){e.next=4;break}return W({content:"Please select an agency to update",variant:"error"}),e.abrupt("return");case 4:return e.next=6,h(t);case 6:(n=e.sent).data&&n.data.resendInviteEmail&&n.data.resendInviteEmail.success&&W({content:"Sent!",variant:"success"}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),W({content:e.t0.message,variant:"error"});case 13:case"end":return e.stop()}},e,null,[[0,10]])}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(q,{withNav:!0,bannerChildren:"User Management",loading:f},r.a.createElement(d.b,{sx:{maxWidth:"1200px",margin:"auto"},py:45},r.a.createElement(d.f,{as:"h1"},"Update Agency"),r.a.createElement(d.b,{py:25},r.a.createElement(d.j,{onChange:function(e){return c(e.target.value)},type:"select",name:"agencyId"},v?r.a.createElement("option",null,"loading..."):y?[r.a.createElement("option",{value:""},"Select an agency")].concat(Object(l.a)(y.agencies.map(function(e){return r.a.createElement("option",{value:e.id},e.name)}))):r.a.createElement("option",null,"No agencies"))),r.a.createElement(d.b,null,x?r.a.createElement(d.k,null):r.a.createElement(d.b,{as:"form",onSubmit:I(H)},r.a.createElement(d.b,{py:25},r.a.createElement(d.h,null,"Name"),r.a.createElement(d.g,{type:"select",name:"name",defaultValue:U.name,ref:k({required:!1,minLength:{value:3,message:"Make sure the name is long enough."}})}),r.a.createElement(Ye,{error:N.name})),r.a.createElement(d.b,{py:25},r.a.createElement(d.h,null,"Surfline Id"),r.a.createElement(d.g,{type:"select",name:"surflineSpotId",defaultValue:U.surflineSpotId,ref:k({required:!1,minLength:{value:15,message:"Spot ids should looks something like this: 5842041f4e65fad6a77089fa"}})}),r.a.createElement(Ye,{error:N.surflineSpotId})),r.a.createElement(d.b,null,C&&C.agencies[0].activities?r.a.createElement(d.b,{py:25},r.a.createElement("h2",null,"Categories "),r.a.createElement(et,{data:C.agencies[0].activities,registerForm:k,dirtyFields:D}),r.a.createElement(Ye,{error:N.activities})):r.a.createElement(n.Fragment,null)),r.a.createElement(d.b,{py:25},r.a.createElement(d.c,{block:!0,type:"submit"},b?"Updating...":"Update"))),C&&C.agencies[0].users?r.a.createElement(d.b,{py:25},r.a.createElement("h2",null,"Users "),r.a.createElement(Ke,{data:C.agencies[0].users,resendInvite:B}),r.a.createElement(Ye,{error:N.users})):r.a.createElement(n.Fragment,null))))}var Ye=function(e){var t=e.error;return t?r.a.createElement(d.b,{color:"red"},t.message):r.a.createElement(n.Fragment,null)};function Ze(e){var t=e.columns,a=e.data,n=Object(De.useTable)({columns:t,data:a}),c=n.getTableProps,o=n.getTableBodyProps,i=n.headerGroups,l=n.rows,s=n.prepareRow;return r.a.createElement("table",c(),r.a.createElement("thead",null,i.map(function(e){return r.a.createElement("tr",e.getHeaderGroupProps(),e.headers.map(function(e){return r.a.createElement("th",e.getHeaderProps(),e.render("Header"))}))})),r.a.createElement("tbody",o(),l.map(function(e,t){return s(e),r.a.createElement("tr",e.getRowProps(),e.cells.map(function(e){return r.a.createElement("td",e.getCellProps(),e.value)}))})))}var Ke=function(e){var t=e.data,a=e.resendInvite,c=r.a.useMemo(function(){return[{Header:"Name",accessor:"name"},{Header:"Email",accessor:"email"},{Header:"Role",accessor:"role"},{Header:"Registered",accessor:function(e){return!0===e.isSignedUp?"Yes":"No"}},{Header:"Resend Invite ",accessor:function(e){return!1===e.isSignedUp&&e.email?r.a.createElement(d.c,{onClick:function(){return a({variables:{email:e.email}})},variant:"link",sx:{variant:"link"}},"Resend Invite"):r.a.createElement(n.Fragment,null)}}]},[]),o=r.a.useMemo(function(){return t},[]);return r.a.createElement(at,null,r.a.createElement(Ze,{columns:c,data:o}))},et=function(e){var t=e.data,a=e.dirtyFields,c=e.registerForm,o=Object(n.useState)(t),i=Object(m.a)(o,2),s=i[0],u=i[1];Object(n.useEffect)(function(){u(t)},[t]);var b=r.a.useMemo(function(){return[{Header:"Label",accessor:"label"},{Header:"Label One",accessor:function(e){var t="activities.".concat(e.id,".subLabelOne");return r.a.createElement(d.g,{name:t,defaultValue:e.subLabelOne,sx:{border:a.includes(t)?"3px solid green":"1px solid black"},ref:c({required:!1})})}},{Header:"Label Two",accessor:function(e){var t="activities.".concat(e.id,".subLabelTwo");return r.a.createElement(d.g,{name:t,defaultValue:e.subLabelTwo,sx:{border:a.includes(t)?"3px solid green":"1px solid black"},ref:c({required:!1})})}},{Header:"Label Three",accessor:function(e){var t="activities.".concat(e.id,".subLabelThree");return r.a.createElement(d.g,{name:t,defaultValue:e.subLabelThree,sx:{border:a.includes(t)?"3px solid green":"1px solid black"},ref:c({required:!1})})}}]},[a]);return r.a.createElement(at,null,r.a.createElement(Ze,{columns:b,data:s}),r.a.createElement(d.c,{type:"button",sx:{marginTop:10},onClick:function(){return u(function(e){return[].concat(Object(l.a)(e),[{id:"newLabel"+(e.length+1),label:"",subLabelOne:"",subLabelTwo:"",subLabelThree:""}])})}},"+ Add New Label"))},tt=function(e,t,a){return a||t?a?"".concat(e," / ").concat(t," / ").concat(a):"".concat(e," / ").concat(t):"".concat(e)},at=He.a.div(Fe(),function(e){return e.theme.colors.grayDark}),nt=a(184);function rt(){var e=Object(y.a)(["\n  padding: 1rem;\n  table {\n    border-spacing: 0;\n    border: 1px solid black;\n    border-radius: 4px;\n    tr {\n      :last-child {\n        td {\n          border-bottom: 0;\n        }\n      }\n    }\n    th {\n      background-color: ",";\n      text-align: left;\n      padding: 1rem;\n      color: white;\n    }\n    td {\n      margin: 0;\n      padding: 0.5rem;\n      border-bottom: 1px solid black;\n      border-right: 1px solid black;\n      :last-child {\n        border-right: 0;\n      }\n    }\n  }\n"]);return rt=function(){return e},e}function ct(){var e=Object(y.a)(["\n  mutation CreateNotification($data: NotificationMessageCreateInput!) {\n    createOneNotificationMessage(data: $data) {\n      id\n    }\n  }\n"]);return ct=function(){return e},e}function ot(){var e=Object(y.a)(["\n  query GetAgencies($where: AgencyWhereInput) {\n    agencies(where: $where) {\n      id\n      name\n    }\n  }\n"]);return ot=function(){return e},e}var it=U()(ot()),lt=U()(ct());function st(){var e=Object(n.useState)(null),t=Object(m.a)(e,2),a=t[0],c=t[1],o=Object(Y.b)(lt),i=Object(m.a)(o,2),s=i[0],b=i[1].loading,g=Object(Y.c)(it),p=g.data,h=g.loading,f=Object(ye.a)({mode:"onChange"}),E=f.register,y=f.handleSubmit,v=f.errors,O=f.formState,S=f.reset,w=O.dirty,j=ie().add,x=function(){var e=Object(X.a)(V.a.mark(function e(t){var n,r;return V.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n={},console.log(w,t),!Object(nt.isEmpty)(t)){e.next=6;break}return j({content:"No updates made.",variant:"error"}),e.abrupt("return");case 6:return a&&(n.agencies={connect:{id:a}}),console.log(t),e.next=10,s({variables:{data:Object(u.a)(Object(u.a)({global:!a},t),n)}});case 10:(r=e.sent).data&&r.data.createOneNotificationMessage&&r.data.createOneNotificationMessage.id&&(j({content:"Notified!",variant:"success"}),S()),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0.message),j({content:e.t0.message,variant:"error"});case 18:case"end":return e.stop()}},e,null,[[0,14]])}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(q,{withNav:!0,bannerChildren:"Notifications",loading:b},r.a.createElement(d.b,{sx:{maxWidth:"1200px",margin:"auto"},py:45},r.a.createElement(d.f,{as:"h1"},"Create Notification"),r.a.createElement(d.b,{as:"form",onSubmit:y(x)},r.a.createElement(d.b,{py:25},r.a.createElement(d.j,{onChange:function(e){return c(e.target.value)},type:"select",name:"agencyId"},h?r.a.createElement("option",null,"loading..."):p?[r.a.createElement("option",{value:""},"Select an agency")].concat(Object(l.a)(p.agencies.map(function(e){return r.a.createElement("option",{value:e.id},e.name)}))):r.a.createElement("option",{value:!0},"All agencies"))),r.a.createElement(d.b,{py:25},r.a.createElement(d.h,null,"Message"),r.a.createElement(d.g,{name:"message",ref:E({required:!0})}),r.a.createElement(ut,{error:v.message})),r.a.createElement(d.b,{py:25},r.a.createElement(d.h,null,"Url"),r.a.createElement(d.b,{bg:"primary",m:3,p:3,sx:{color:"white"}},"Must be a full url (https://google.com) or a route in the app (agency/dispatches)"),r.a.createElement(d.g,{name:"url",ref:E({required:!1})}),r.a.createElement(ut,{error:v.url})),r.a.createElement(d.b,{py:25},r.a.createElement(d.c,{block:!0,type:"submit"},b?"Updating...":"Update")))))}var ut=function(e){var t=e.error;return t?r.a.createElement(d.b,{color:"red"},t.message):r.a.createElement(n.Fragment,null)};He.a.div(rt(),function(e){return e.theme.colors.grayDark});var mt={pre:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,null,t)},code:We.a};function dt(){return r.a.createElement(pe.a,{client:L},r.a.createElement(i.a,{theme:he,components:mt},r.a.createElement(Z.a,null,r.a.createElement(oe,null,r.a.createElement(E.c,null,r.a.createElement(Ee,{component:Q,path:"/"}),r.a.createElement(fe,{path:"admin",component:ge}),r.a.createElement(fe,{path:"admin/users",component:Ae}),r.a.createElement(fe,{path:"admin/edit-agency",component:Xe}),r.a.createElement(fe,{path:"admin/create-notifications",component:st}),r.a.createElement(fe,{path:"admin/activity",component:Ue}),r.a.createElement(Ee,{component:Se,path:"/admin/login"}))))))}var bt=document.getElementById("root");o.a.render(r.a.createElement(dt,null),bt)}},[[188,1,2]]]);
//# sourceMappingURL=main.6a0d9153.chunk.js.map