(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{152:function(e,t,n){e.exports=n(282)},157:function(e,t,n){},158:function(e,t,n){},175:function(e,t){},177:function(e,t){},213:function(e,t){},214:function(e,t){},282:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(53),o=n.n(c),i=n(285),l=(n(157),n(9)),s=n(7),u=n(6),m=n(284),b=n(136),d=n.n(b);n(158);function g(e){var t=[];return e&&e.forEach(function(e){var n=e.value,a=e.children;t=[].concat(Object(l.a)(t),[n],Object(l.a)(g(a)))}),t}var p=function(e){var t=e.options,n=e.handleClear,c=Object(a.useState)(t),o=Object(u.a)(c,2),i=o[0],l=o[1],b=Object(a.useState)({}),p=Object(u.a)(b,2),f=p[0],h=p[1],y=Object(a.useState)(),E=Object(u.a)(y,2),v=E[0],O=E[1],j=Object(a.useState)(),S=Object(u.a)(j,2),w=S[0],C=S[1],x=Object(a.useState)(),A=Object(u.a)(x,2),k=A[0],P=A[1];r.a.useEffect(function(){l(t),C(function(e){return g(t).filter(function(t){return!e||e.includes(t)})}),P(g(t))},[t]);return r.a.createElement(m.b,{as:"form",onSubmit:function(e){return function(e){if(e.preventDefault(),!f.agency)return O({agency:"Please input an agency name"});O({});var t=w.map(function(e){return e.split(" -")[0]});fetch("https://hooks.slack.com/services/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",{method:"POST",headers:{Accept:"application/json"},body:JSON.stringify({text:" ".concat(f.agency," has submitted their stat form:, ``` ").concat(t,"``` ")})}).then(function(e){!0===e.ok&&alert("Stat categories sent successfully")}).catch(function(e){O({form:"Error submitting: ".concat(e)})})}(e)}},r.a.createElement(m.b,{py:3},r.a.createElement(m.h,{htmlFor:"agency"},"My Agency Name"),r.a.createElement(m.g,{id:"agency",name:"agency",onChange:function(e){h(Object(s.a)({},e.target.name,e.target.value))}}),v&&v.agency&&r.a.createElement(m.b,{color:"red"},v.agency)),r.a.createElement(m.b,{py:3},i.length<1&&r.a.createElement("div",null,"No stats to select."),r.a.createElement(d.a,{nodes:i,checked:w,expanded:k,optimisticToggle:!1,noCascade:!0,onCheck:function(e){return C(e)},onExpand:function(e){return P(e)},icons:{check:r.a.createElement("span",{className:"rct-icon rct-icon-check"}),uncheck:r.a.createElement("span",{className:"rct-icon rct-icon-uncheck"}),halfCheck:r.a.createElement("span",{className:"rct-icon rct-icon-half-check"}),expandClose:r.a.createElement("span",{className:"rct-icon rct-icon-expand-close"}),expandOpen:r.a.createElement("span",{className:"rct-icon rct-icon-expand-open"}),expandAll:r.a.createElement("span",{className:"rct-icon rct-icon-expand-all"}),collapseAll:r.a.createElement("span",{className:"rct-icon rct-icon-collapse-all"}),parentClose:null,parentOpen:null,leaf:null}})),r.a.createElement(m.c,null,"Submit categories"),r.a.createElement(m.c,{style:{marginLeft:10},variant:"secondary",onClick:function(){return n()},type:"button"},"Clear Checkboxes"),v&&v.form&&r.a.createElement(m.b,{color:"red"},v.form))},f=function(e){var t=e.children;return r.a.createElement(m.b,{sx:{px:4,py:"10rem",backgroundImage:"url(https://images.unsplash.com/photo-1444762908691-c8461d64d5f6?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=3300&q=80)",backgroundSize:"cover",backgroundPosition:"center",borderRadius:8,color:"white",bg:"gray",position:"relative"}},r.a.createElement(m.f,{sx:{position:"relative",zIndex:"2",textAlign:"center",fontSize:[5,6]},as:"h4"},t),r.a.createElement(m.b,{sx:{position:"absolute",top:"0px",right:"0px",left:"0px",bottom:"0px",zIndex:"1",backgroundColor:"rgb(51, 51, 51)",opacity:"0.8"}}))},h=n(25),y=n(17),E=n(46),v=n.n(E);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}var j=n(167);"production"!==Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_SLACK_URL:"https://hooks.slack.com/services/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",REACT_APP_STAGING_GRAPHQL_URL:"http://localhost:3000/",REACT_APP_STAGE:"staging"}).NODE_STAGE&&j.config();var S={staging:{GRAPHQL_URL:"http://localhost:3000/"},production:{GRAPHQL_URL:Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_SLACK_URL:"https://hooks.slack.com/services/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",REACT_APP_STAGING_GRAPHQL_URL:"http://localhost:3000/",REACT_APP_STAGE:"staging"}).REACT_APP_PRODUCTION_GRAPHQL_URL},slackUrl:"https://hooks.slack.com/services/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"},w=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach(function(t){Object(s.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},S,{},S.staging),C=n(36),x=n(149),A=n(151),k=n(142);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach(function(t){Object(s.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var D=Object(A.a)({uri:w.GRAPHQL_URL}),R=Object(k.a)(function(e,t){var n=t.headers,a=v.a.load("token");return{headers:I({},n,{Authorization:a?"Bearer ".concat(a):""})}}),N=new C.a({link:R.concat(D),cache:new x.a}),U=n(145),T=n.n(U),W=n(18),H=n.n(W);function B(){var e=Object(y.a)(["\n  query CurrentUser {\n    me {\n      id\n      email\n      name\n      role\n    }\n  }\n"]);return B=function(){return e},e}var L=function(){return"undefined"!==typeof window},$=(H()(B()),function(){return v.a.load("token")}),_=function(){return!!L()&&!!$()},F=function(){if(!L())return!1;var e=function(){if(!_())return null;var e=$();return T.a.decode(e).role}();return!!e&&"SUPER_ADMIN"===e},M=function(e){v.a.remove("token",{path:"/"}),e()},G=function(e){return e.isCurrent?{style:{color:"inherit",textDecoration:"underline"}}:null},q=function(){return r.a.createElement(m.e,{as:"nav",p:25,sx:{bg:"black",color:"white",fontWeight:"bold",justifyContent:"space-between"}},r.a.createElement(m.e,{sx:{flex:1}},r.a.createElement(m.b,{color:"white",p:2},r.a.createElement(h.a,{getProps:G,style:{color:"inherit",textDecoration:"none"},to:"/admin"},"Create Agency")),r.a.createElement(m.b,{color:"white",p:2},r.a.createElement(h.a,{getProps:G,style:{color:"inherit",textDecoration:"none"},to:"/admin/edit-agency"},"Edit Agency")),r.a.createElement(m.b,{color:"white",p:2},r.a.createElement(h.a,{getProps:G,style:{color:"inherit",textDecoration:"none"},to:"/admin/users"},"Invite Users")),r.a.createElement(m.b,{color:"white",p:2},r.a.createElement(h.a,{getProps:G,style:{color:"inherit",textDecoration:"none"},to:"/admin/activity"},"Activity"))),r.a.createElement(m.b,{p:2},r.a.createElement(m.i,{href:"/agency/stats",onClick:function(e){e.preventDefault(),M(function(){return Object(h.d)("/admin/login")})}},"Logout")))};function z(e){var t=e.withNav,n=e.bannerChildren,a=e.children,c=e.loading;return r.a.createElement(m.b,{sx:{position:"relative"}},c&&r.a.createElement(m.b,{sx:{position:"fixed",top:0,right:0}},r.a.createElement(m.k,null)),r.a.createElement(f,null,n),t&&r.a.createElement(m.b,{sx:{width:"100%"}},r.a.createElement(q,null)),r.a.createElement(m.b,{p:45,sx:{position:"relative"}},a))}function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach(function(t){Object(s.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var V=function(e){return e.map(function(e,t){return{label:e.category,value:"".concat(e.category," - ").concat(t),children:e.subCategories&&e.subCategories.map(function(t,n){return{label:t,value:"".concat(e.category," / ").concat(t," - ").concat(n),children:e.subSubCategories&&e.subSubCategories.map(function(a,r){return{label:a,value:"".concat(e.category," / ").concat(t," / ").concat(a," - ").concat(n+r)}})}})}})};var X=[{category:"Rescues",subCategories:["Rip Current","Surf","Pier","Rocks & Jetty","Inshore Holes","Other"],subSubCategories:["Swimmer","Apparatus","Other"]},{category:"Preventative Action",subCategories:["Rip Current","Surf","Pier","Rocks & Jetty","Inshore Holes","Other"],subSubCategories:["Swimmer","Apparatus","Other"]},{category:"Minor Medical Aid",subCategories:["Laceration","Abrasion","Fracture","Sprain or Strain","Head Neck Back Injury","Stingray","JellyFish","Other"],subSubCategories:["Skating","Surfing","Biking","Other"]},{category:"Major Medical Aid",subCategories:["Laceration","Abrasion","Fracture","Sprain or Strain","Head Neck Back Injury","Stingray","JellyFish","Other"],subSubCategories:["Skating","Surfing","Biking","Other"]},{category:"Enforcement",subCategories:["Warning","Citation","PD Assist","Arrest"],subSubCategories:["BBQ","Alcohol","Fighting","Smoking","Unsafe Beach Activity","Other"]},{category:"Missing Person",subCategories:["Child","Adult"],subSubCategories:["Lost","Found"]},{category:"Contact",subCategories:["Public Assist","Public Education","Providing Information"]},{category:"Wildlife",subCategories:["Bird","Mammal","Shark"],subSubCategories:["Live","Dead","Injured"]},{category:"Boat",subCategories:["Warning","Tow","Assist","Rescue"]},{category:"Attendance",subCategories:["Beach","Surfers","Bodyboarders","Lagoon"]}];var Y=function(){var e=Object(a.useState)(X),t=Object(u.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)({categorySelect:"All"}),i=Object(u.a)(o,2),b=i[0],d=i[1],g=function(e){d(J({},b,Object(s.a)({},e.target.name,e.target.value)))},f=function(e,t){try{var n=e.toLowerCase().split(" ").map(function(e){return e[0].toUpperCase()+e.substr(1)}).join(" ").trim();c(function(e){var a;return"category"===t?a=[].concat(Object(l.a)(e),[Object(s.a)({},t,n)]):(e.forEach(function(a,r){"All"===b.categorySelect?e[r][t]?e[r][t].push(n):e[r][t]=[n]:b.categorySelect===a.category&&(e[r][t]?e[r][t].push(n):e[r][t]=[n])}),a=e),a}),d(J({},b,Object(s.a)({},t,"")))}catch(a){console.error(a)}},h=V(n);return r.a.createElement(z,{withNav:!1,bannerChildren:"Watchtower Onboarding"},r.a.createElement(m.b,{m:2,p:5,sx:{textAlign:"center",fontWeight:"bold",bg:"blue",color:"white"}},"Please fill out the below form to get your Watchtower configured to your beach. If you have questions, please reach out to your Watchtower rep."),r.a.createElement(m.e,{py:4,sx:{flexWrap:"wrap",maxWidth:"1200px",margin:"auto"}},r.a.createElement(m.b,{sx:{width:["100%","50%"],borderBottom:"1px solid lightgray"},p:3},r.a.createElement(m.f,{pb:1},"Select Your Stat Categories"),r.a.createElement(m.l,{sx:{fontSize:13},pb:3},"Check the categories you would like to capture"),r.a.createElement(p,{options:h,handleClear:function(){c([])}})),r.a.createElement(m.e,{p:3,sx:{width:["100%","50%"],flexDirection:"column"}},r.a.createElement(m.f,{pb:1},"Custom Categories"),r.a.createElement(m.l,{fontSize:13,pb:3},"Custom categories will show in your checkbox tree"),r.a.createElement(m.e,{py:3,sx:{flexDirection:"column"}},r.a.createElement(m.b,{pb:2},r.a.createElement(m.h,null,"Add Custom Category"),r.a.createElement(m.g,{value:b.category||"",name:"category",onChange:g}),r.a.createElement(m.b,{py:2},r.a.createElement(m.c,{onClick:function(){return f(b.category,"category")}},"Add")))),r.a.createElement(m.e,{py:3,sx:{flexDirection:"column"}},r.a.createElement(m.f,{as:"h4",pb:1},"Custom SubCategories"),r.a.createElement(m.l,{fontSize:13,pb:3},"Select the category you would like your sub and sub sub categories to be added to."),r.a.createElement(m.b,{py:2},r.a.createElement(m.h,null,"Add to:"),r.a.createElement(m.j,{value:b&&b.categorySelect||"All",name:"categorySelect",onChange:g,defaultValue:"All"},r.a.createElement("option",{value:"All"},"All"),n.map(function(e,t){return r.a.createElement("option",{key:t,value:e.category},e.category)}))),r.a.createElement(m.b,{py:3},r.a.createElement(m.h,null,"SubCategory"),r.a.createElement(m.g,{value:b.subCategories||"",name:"subCategories",onChange:g}),r.a.createElement(m.b,{py:2},r.a.createElement(m.c,{onClick:function(){return f(b.subCategories,"subCategories")}},"Add"))),r.a.createElement(m.b,{pb:2},r.a.createElement(m.h,null,"SubSubCategory"),r.a.createElement(m.g,{value:b.subSubCategories||"",name:"subSubCategories",onChange:g})),r.a.createElement(m.b,null,r.a.createElement(m.c,{onClick:function(){return f(b.subSubCategories,"subSubCategories")}},"Add"))))))},Z=n(8),K=n.n(Z),ee=n(14),te=n(21),ne=n(65),ae=n(146),re=n.n(ae),ce=n(38);function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}var ie=r.a.createContext(),le=function(e){return r.a.createElement("div",Object.assign({style:{position:"fixed",right:0,top:0,zIndex:1e3}},e))},se=function(e){var t=e.children,n=e.onDismiss,a=Object(ce.a)(e,["children","onDismiss"]);return r.a.createElement(m.a,Object.assign({style:{margin:10,padding:10},onClick:n},a),t)},ue=0;function me(e){var t=e.children,n=r.a.useState([]),a=Object(u.a)(n,2),c=a[0],o=a[1],i=function(e){var t=c.filter(function(t){return t.id!==e});o(t)},m=function(e){return function(){return i(e)}};return r.a.createElement(ie.Provider,{value:{add:function(e){var t=e.content,n=Object(ce.a)(e,["content"]),a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(n),!0).forEach(function(t){Object(s.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({content:t,id:ue++},n);o([].concat(Object(l.a)(c),[a]))},remove:i}},t,r.a.createElement(le,null,c.map(function(e){var t=e.content,n=e.id,a=Object(ce.a)(e,["content","id"]);return r.a.createElement(se,Object.assign({key:n,Toast:se,onDismiss:m(n)},a),t)})))}var be=function(){return r.a.useContext(ie)};function de(e){return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}function ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(n),!0).forEach(function(t){Object(s.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ge(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function fe(){var e=Object(y.a)(["\n  mutation OnboardAgency($data: OnboardAgencyInput!) {\n    onboardAgency(data: $data) {\n      id\n    }\n  }\n"]);return fe=function(){return e},e}var he=H()(fe()),ye=function(e){var t=e.children;return r.a.createElement(m.b,{p:25,sx:{position:"absolute",bottom:0,right:0,left:0,height:"auto",textAlign:"right"}},t)},Ee=function(e){var t={agencyName:e.agencyName,activities:e.stats,surflineSpotId:e.surflineSpotId};return e.users&&(t.users={create:e.users.map(function(e){return{name:e.name}})}),e.positions&&(t.positions={create:e.positions.map(function(t){return{name:t.name,dispatchable:!!e[t.name]}})}),{data:pe({},t)}},ve=function(){var e=Object(te.b)(he),t=Object(u.a)(e,2),n=t[0],c=t[1].loading,o=Object(a.useState)({}),i=Object(u.a)(o,2),l=i[0],b=i[1],d=Object(a.useState)(),g=Object(u.a)(d,2),p=g[0],f=g[1],h=be().add,y=Object(ne.b)(function(){return r.a.createElement(re.a,{isOpen:!0},r.a.createElement(m.f,{as:"h1"},"Are you sure you would like to create this agency:"),Object.keys(l).length?r.a.createElement(r.a.Fragment,null," ",r.a.createElement(m.b,{p:45},r.a.createElement(m.b,{bg:"primary",m:3,p:3,sx:{color:"white"}},r.a.createElement("strong",null,"Please review this for accuracy. It is difficule to undo a new agency.")),l.agencyName&&r.a.createElement("div",null,r.a.createElement(m.f,{as:"h3"},"Agency:"),l.agencyName),l.surflineSpotId&&r.a.createElement("div",null,r.a.createElement(m.f,{as:"h3"},"SurflineSpotId:"),l.surflineSpotId),l.stats&&r.a.createElement("div",null,r.a.createElement(m.f,{as:"h3"},"Stats:"),JSON.stringify(l.stats)),l.users&&r.a.createElement("div",null,r.a.createElement(m.f,{as:"h3"},"Users:"),JSON.stringify(l.users)),l.positions&&r.a.createElement("div",null,r.a.createElement(m.f,{as:"h3"},"Positions:"),JSON.stringify(l.positions)),r.a.createElement(m.b,{py:20},r.a.createElement("strong",null," ","In case you need Trevor to create, share this snippet:")),p?r.a.createElement("code",null,JSON.stringify(p).replace(/\"([^(\")"]+)\":/g,"$1:")):r.a.createElement(m.c,{onClick:function(){return w}},"Generate Snippet")),r.a.createElement(ye,null,r.a.createElement(m.c,{sx:{marginRight:5},onClick:Object(ee.a)(K.a.mark(function e(){var t;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n({variables:pe({},p)});case 3:(t=e.sent).data&&t.data.onboardAgency&&t.data.onboardAgency.id&&(h({content:"Agency created!",variant:"success"}),O()),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),h({content:e.t0.message,variant:"error"});case 10:case"end":return e.stop()}},e,null,[[0,7]])}))},c?"Creating...":"Create Agency"),r.a.createElement(m.c,{onClick:function(){return O()},variant:"secondary"},"Not yet"))):r.a.createElement(m.b,{p:45},"No values...",r.a.createElement(ye,null,r.a.createElement(m.c,{onClick:function(){return O()}},"Go Back"))))},[l,p,c,h]),E=Object(u.a)(y,2),v=E[0],O=E[1];function j(e){b(pe({},l,Object(s.a)({},e.target.name,!l[e.target.name])))}function S(e,t){var n;if("stats"===e.target.name&&(n=e.target.value.split(",").map(function(e){return de(e.trim())})),"positions"===e.target.name){var a=e.target.value.split(",");n=a?a.map(function(e){return{name:e&&de(e.trim()),dispatchable:!1}}):""}if("users"===e.target.name){var r=e.target.value.split(":");r[1]||(r=e.target.value.split(",")),n=r?r.map(function(e){return{name:e&&de(e.trim())}}):""}b(pe({},l,Object(s.a)({},e.target.name,n||de(e.target.value))))}function w(){f(Ee(l))}return r.a.createElement(z,{withNav:!0,bannerChildren:"Watchtower Admin"},r.a.createElement(m.b,{sx:{maxWidth:"1200px",margin:"auto"},py:45,as:"form",onSubmit:function(e){return e.preventDefault()}},r.a.createElement(m.f,{as:"h1"},"Create an agency"),r.a.createElement(m.l,null,"Input information to create an agency"),r.a.createElement(m.b,{py:25}," ",r.a.createElement(m.h,null,"Agency Name"),r.a.createElement(m.g,{id:"agencyName",name:"agencyName",onChange:S})),r.a.createElement(m.b,{py:25}," ",r.a.createElement(m.h,null,"Surfline Spot Id"),r.a.createElement(m.b,{bg:"primary",m:3,p:3,sx:{color:"white"}},r.a.createElement("strong",null,"You can find this at the end of a surfline spot url. IT SHOULD START WITH A 5 and be around 20+ characters. Example:"),r.a.createElement("br",null),"https://www.surfline.com/surf-report/newport-beach-/5842041f4e65fad6a770882c"),r.a.createElement(m.g,{id:"surflineSpotId",name:"surflineSpotId",onChange:S})),r.a.createElement(m.b,{py:25}," ",r.a.createElement(m.h,null,"Stats"),r.a.createElement(m.b,{bg:"primary",m:3,p:3,sx:{color:"white"}},r.a.createElement("strong",null," ","Should follow this notation with each type being separated by a comma:")," ",r.a.createElement("br",null),"Rescue, Rescue / Surf / Swimmer, Boat, Boat / Tow"),r.a.createElement(m.g,{as:"textarea",name:"stats",rows:"15",style:{width:"100%"},onChange:function(e){return S(e)}})),r.a.createElement(m.b,{py:25}," ",r.a.createElement(m.h,null,"Users"),r.a.createElement(m.b,{bg:"primary",m:3,p:3,sx:{color:"white"}},r.a.createElement("strong",null," ","Should follow this notation with each type being separated by a comma or a colon (:). IF THE NAMES HAVE A COMMA, MAKE SURE YOU USE : TO SEPARATE. SEE EXAMPLE BELOW:")," ",r.a.createElement("br",null),"Trevor Heath, David Rodriguez ",r.a.createElement("br",null),r.a.createElement("strong",null,"or"),r.a.createElement("br",null)," Heath, Trevor: Rodriguez, David",r.a.createElement("br",null),"You can use this"," ",r.a.createElement("a",{href:"https://convert.town/column-to-comma-separated-list"},"website")," ","to convert a column to the correct format. The delimiter option allows you to choose a comma or colon."),r.a.createElement(m.g,{as:"textarea",name:"users",rows:"15",style:{width:"100%"},onChange:function(e){return S(e)}})),r.a.createElement(m.b,{py:25}," ",r.a.createElement(m.h,null,"Positions"),r.a.createElement(m.b,{bg:"primary",m:3,p:3,sx:{color:"white"}},r.a.createElement("strong",null,"Should follow this notation with each type being separated by a comma:")," ",r.a.createElement("br",null),"Tower 10, 5210, 5220"),r.a.createElement(m.g,{as:"textarea",name:"positions",rows:"15",style:{width:"100%"},onChange:S}),l.positions&&r.a.createElement("div",null,r.a.createElement("h4",null,"Dispatchable?"),r.a.createElement(m.b,{bg:"primary",m:3,p:3,sx:{color:"white"}},r.a.createElement("strong",null,"Check the positions that are defaulted as dispatchable, this can be editted by the user later on.")),l.positions.map(function(e,t){return r.a.createElement(m.b,null,r.a.createElement(m.h,{mb:3},r.a.createElement(m.d,{defaultChecked:!1,name:e.name,onClick:j}),e.name))}))),r.a.createElement(m.b,{py:45,sx:{width:"100%"}},r.a.createElement(m.c,{sx:{width:"100%"},onClick:function(){w(),v()}},"Create agency data"))))},Oe=n(19),je=(n(279),n(280),{breakpoints:["576px","768px","992px","1200px"],colors:{white:"#fff",black:"#000",gray:["#fff","#f8f9fa","#e9ecef","#dee2e6","#ced4da","#adb5bd","#6c757d","#495057","#343a40","#212529"],blue:"#007bff",indigo:"#6610f2",purple:"#6f42c1",pink:"#e83e8c",red:"#dc3545",orange:"#fd7e14",yellow:"#ffc107",green:"#28a745",teal:"#20c997",cyan:"#17a2b8",grayDark:"#343a40",text:"#212529",background:"#fff",primary:"#007bff",secondary:"#6c757d",muted:"#dee2e6",success:"#28a745",info:"#17a2b8",warning:"#ffc107",danger:"#dc3545",light:"#f8f9fa",dark:"#343a40",textMuted:"#6c757d"},space:["0rem","0.25rem","0.5rem","1rem","1.5rem","3rem"],fonts:{body:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',heading:"inherit",monospace:'SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace',sans:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"'},fontSizes:["0.75rem","0.875rem","1rem","1.25rem","1.5rem","1.75rem","2rem","2.5rem","3.5rem","4.5rem","5.5rem","6rem"],fontWeights:{body:400,heading:500,bold:700,light:300,normal:400,display:300},lineHeights:{body:1.5,heading:1.2},sizes:{sm:540,md:720,lg:960,xl:1140},shadows:{default:"0 .5rem 1rem rgba(0, 0, 0, .15)",sm:"0 .125rem .25rem rgba(0, 0, 0, .075)",lg:"0 1rem 3rem rgba(0, 0, 0, .175)"},radii:{default:"0.25rem",sm:"0.2rem",lg:"0.3rem",pill:"50rem"},typeStyles:{heading:{fontFamily:"heading",fontWeight:"heading",lineHeight:"heading",mt:0,mb:2},display:{fontWeight:"display",lineHeight:"heading"},forms:{label:{fontSize:1,fontWeight:"bold"}},alerts:{primary:{color:"white",bg:"primary"},error:{bg:"danger"},success:{bg:"success"}},buttons:{primary:{color:"white",bg:"primary"},link:{bg:"transparent"},success:{bg:"success"},secondary:{color:"black",bg:"secondary"}}},styles:{root:{fontFamily:"body",lineHeight:"body",fontWeight:"body"},a:{color:"primary",textDecoration:"none",":hover":{textDecoration:"underline"}},p:{mb:3,lineHeight:"body"},h1:{fontFamily:"heading",fontWeight:"heading",lineHeight:"heading",mt:0,mb:2,fontSize:7},h2:{fontFamily:"heading",fontWeight:"heading",lineHeight:"heading",mt:0,mb:2,fontSize:6},h3:{fontFamily:"heading",fontWeight:"heading",lineHeight:"heading",mt:0,mb:2,fontSize:5},h4:{fontFamily:"heading",fontWeight:"heading",lineHeight:"heading",mt:0,mb:2,fontSize:4},h5:{fontFamily:"heading",fontWeight:"heading",lineHeight:"heading",mt:0,mb:2,fontSize:3},h6:{fontFamily:"heading",fontWeight:"heading",lineHeight:"heading",mt:0,mb:2,fontSize:2},blockquote:{fontSize:3,mb:3},table:{width:"100%",marginBottom:3,color:"gray.9",borderCollapse:"collapse"},th:{verticalAlign:"bottom",borderTopWidth:2,borderTopStyle:"solid",borderTopColor:"gray.3",borderBottomWidth:2,borderBottomStyle:"solid",borderBottomColor:"gray.3",padding:".75rem",textAlign:"inherit"},td:{borderBottomWidth:2,borderBottomStyle:"solid",borderBottomColor:"gray.3",verticalAlign:"top",padding:".75rem"},inlineCode:{color:"pink"},img:{maxWidth:"100%",height:"auto"}}}),Se=function(e){var t=e.component,n=Object(ce.a)(e,["component"]);return _()&&F()?r.a.createElement(t,n):r.a.createElement(h.b,{from:"",to:"/admin/login",noThrow:!0})},we=function(e){var t=e.component,n=Object(ce.a)(e,["component"]);return r.a.createElement(t,n)},Ce=n(44);function xe(){var e=Object(y.a)(["\n  mutation login($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      token\n    }\n  }\n"]);return xe=function(){return e},e}var Ae=H()(xe()),ke=function(){var e=Object(te.b)(Ae),t=Object(u.a)(e,2),n=t[0],c=t[1],o=c.data,i=c.loading,l=c.error,s=Object(Ce.a)(),b=s.register,d=s.handleSubmit;return Object(a.useEffect)(function(){var e;_()&&Object(h.d)("/admin"),o&&o.login.token&&(e=o.login.token,v.a.save("token",e,{path:"/"}),Object(h.d)("/admin"))},[o,l]),r.a.createElement(m.e,{sx:{minHeight:"100vh",justifyContent:"center",alignItems:"center"}},r.a.createElement(m.b,{as:"form",sx:{width:"300px"},onSubmit:d(function(e){n({variables:{email:e.email,password:e.password}})})},r.a.createElement(m.b,null,r.a.createElement(m.f,{p:3,as:"h3"},"Watchower Admin"),r.a.createElement(m.b,{p:3},r.a.createElement(m.h,null,"Email Address"),r.a.createElement(m.g,{type:"email",name:"email",ref:b})),r.a.createElement(m.b,{p:3},r.a.createElement(m.h,null,"Password"),r.a.createElement(m.g,{type:"password",name:"password",ref:b})),r.a.createElement(m.b,{p:3},r.a.createElement(m.c,{block:!0,type:"submit"},i?"Logging in...":"Login"),l&&r.a.createElement(m.b,null,l.message)))))};function Pe(){var e=Object(y.a)(["\n  mutation InviteUser(\n    $email: String!\n    $agencyId: ID!\n    $role: Role!\n    $name: String!\n  ) {\n    sendInviteEmail(\n      email: $email\n      agencyId: $agencyId\n      role: $role\n      name: $name\n    ) {\n      success\n    }\n  }\n"]);return Pe=function(){return e},e}function Ie(){var e=Object(y.a)(["\n  query GetAgencies($where: AgencyWhereInput) {\n    agencies(where: $where) {\n      id\n      name\n    }\n  }\n"]);return Ie=function(){return e},e}var De=H()(Ie()),Re=H()(Pe());function Ne(){var e=Object(te.b)(Re),t=Object(u.a)(e,2),n=t[0],a=t[1].loading,c=Object(te.c)(De),o=c.data,i=c.loading,l=Object(Ce.a)(),s=l.register,b=l.handleSubmit,d=be().add,g=function(){var e=Object(ee.a)(K.a.mark(function e(t){var a;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n({variables:{email:t.email,role:t.role||"USER",name:t.name,agencyId:t.agencyId}});case 3:(a=e.sent).data&&a.data.sendInviteEmail&&a.data.sendInviteEmail.success&&d({content:"User Invited!",variant:"success"}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),d({content:e.t0.message,variant:"error"});case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(z,{withNav:!0,bannerChildren:"User Management"},r.a.createElement(m.b,{sx:{maxWidth:"1200px",margin:"auto"},py:45,as:"form",onSubmit:b(g)},r.a.createElement(m.f,{as:"h1"},"Invite Users"),r.a.createElement(m.l,null,"Invite users to agencies."),r.a.createElement(m.b,null,r.a.createElement(m.b,{py:25},r.a.createElement(m.h,null,"Agencies"),r.a.createElement(m.j,{type:"select",name:"agencyId",ref:s},i?r.a.createElement("option",null,"loading..."):o?o.agencies.map(function(e){return r.a.createElement("option",{value:e.id},e.name)}):r.a.createElement("option",null,"No agencies"))),r.a.createElement(m.b,{py:25},r.a.createElement(m.h,null,"Email Address"),r.a.createElement(m.g,{type:"select",name:"email",ref:s({required:!0})})),r.a.createElement(m.b,{py:25},r.a.createElement(m.h,null,"Name"),r.a.createElement(m.g,{name:"name",ref:s({required:!0})})),r.a.createElement(m.b,{py:25},r.a.createElement(m.h,null,"Role"),r.a.createElement(m.j,{type:"select",name:"role",ref:s},r.a.createElement("option",{value:"USER"},"User"),r.a.createElement("option",{value:"ADMIN"},"Admin"))),r.a.createElement(m.b,{py:25},r.a.createElement(m.c,{block:!0,type:"submit"},a?"Inviting in...":"Invite")))))}var Ue=n(39),Te=n.n(Ue);function We(){var e=Object(y.a)(["\n  query GetAgencies(\n    $where: AgencyWhereInput\n    $submissionWhereInput: SubmissionWhereInput\n  ) {\n    agencies(where: $where) {\n      id\n      name\n      submissionCount(where: $submissionWhereInput)\n    }\n  }\n"]);return We=function(){return e},e}var He=Te()().subtract(7,"days"),Be=Te()().subtract(30,"days"),Le=[{value:{startDate:He,endDate:Te()()},label:"Last 7 days"},{value:{startDate:Te()().startOf("day"),endDate:Te()()},label:"Today"},{value:{startDate:Be,endDate:Te()().endOf("day")},label:"Last 30 days"}],$e=H()(We());function _e(){var e=Object(a.useState)(0),t=Object(u.a)(e,2),n=t[0],c=t[1],o=Object(te.c)($e,{variables:{submissionWhereInput:{createdAt:{gt:Le[n].value.startDate.toISOString(),lt:Le[n].value.endDate.toISOString()}}}}),i=o.data,l=o.loading;return r.a.createElement(z,{withNav:!0,bannerChildren:"User Management"},r.a.createElement(m.b,{sx:{maxWidth:"1200px",margin:"auto"},py:45},r.a.createElement(m.f,{as:"h1"},"Agency Activity"),l?r.a.createElement(m.e,{sx:{height:"500px",width:"100%",justifyContent:"center",alignItems:"center"}},r.a.createElement(m.k,null)):r.a.createElement(m.b,null,r.a.createElement(m.b,{py:45},r.a.createElement(m.j,{id:"dateRange",value:n,onChange:function(e){c(e.target.value)}},Le.map(function(e,t){return r.a.createElement("option",{name:e.label,value:t},e.label)}))),r.a.createElement(m.b,{as:"table"},r.a.createElement(m.b,{as:"thead"},r.a.createElement(m.b,{as:"tr"},r.a.createElement(m.b,{as:"th"},"Agency Name"),r.a.createElement(m.b,{as:"th"}," Incident Count"))),r.a.createElement("tbody",null,i&&i.agencies.map(function(e){return r.a.createElement(m.b,{as:"tr"},r.a.createElement(m.b,{as:"td",p:10},e.name),r.a.createElement(m.b,{as:"td",p:10},e.submissionCount>29?"30+":e.submissionCount))}))))))}var Fe=n(150),Me=n(148),Ge=n(32);function qe(){var e=Object(y.a)(["\n  padding: 1rem;\n  table {\n    border-spacing: 0;\n    border: 1px solid black;\n    border-radius: 4px;\n    tr {\n      :last-child {\n        td {\n          border-bottom: 0;\n        }\n      }\n    }\n    th {\n      background-color: ",";\n      text-align: left;\n      padding: 1rem;\n      color: white;\n    }\n    td {\n      margin: 0;\n      padding: 0.5rem;\n      border-bottom: 1px solid black;\n      border-right: 1px solid black;\n      :last-child {\n        border-right: 0;\n      }\n    }\n  }\n"]);return qe=function(){return e},e}function ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function Qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ze(Object(n),!0).forEach(function(t){Object(s.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ze(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Je(){var e=Object(y.a)(["\n  mutation ResendInvite($email: String!) {\n    resendInviteEmail(email: $email) {\n      success\n    }\n  }\n"]);return Je=function(){return e},e}function Ve(){var e=Object(y.a)(["\n  mutation UpdateAgency(\n    $where: AgencyWhereUniqueInput!\n    $data: AgencyUpdateInput!\n  ) {\n    updateOneAgency(where: $where, data: $data) {\n      id\n    }\n  }\n"]);return Ve=function(){return e},e}function Xe(){var e=Object(y.a)(["\n  query GetAgencies($where: AgencyWhereInput) {\n    agencies(where: $where) {\n      id\n      name\n    }\n  }\n"]);return Xe=function(){return e},e}function Ye(){var e=Object(y.a)(["\n  query GetAgencyDetails($id: String!) {\n    agencies(where: { id: { equals: $id } }) {\n      id\n      name\n      users {\n        id\n        name\n        email\n        role\n        isSignedUp\n      }\n      settings {\n        id\n        surflineSpotId\n        dispatching\n        incidentReporting\n        epcr\n      }\n    }\n  }\n"]);return Ye=function(){return e},e}var Ze=H()(Ye()),Ke=H()(Xe()),et=H()(Ve()),tt=H()(Je());function nt(){var e=Object(a.useState)(null),t=Object(u.a)(e,2),n=t[0],c=t[1],o=Object(te.b)(et),i=Object(u.a)(o,2),s=i[0],b=i[1].loading,d=Object(te.b)(tt),g=Object(u.a)(d,2),p=g[0],f=g[1].loading,h=Object(te.c)(Ke),y=h.data,E=h.loading,v=Object(te.a)(Ze),O=Object(u.a)(v,2),j=O[0],S=O[1],w=S.loading,C=S.data,x=Object(Ce.a)(),A=x.register,k=x.handleSubmit,P=x.errors,I=Qe({},C&&C.agencies[0],{},C&&C.agencies[0].settings),D=be().add;Object(a.useEffect)(function(){n&&j({variables:{id:n}})},[n]);var R=function(){var e=Object(ee.a)(K.a.mark(function e(t){var a,r;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n){e.next=4;break}return D({content:"Please select an agency to update",variant:"error"}),e.abrupt("return");case 4:return a={},t.surflineSpotId&&(a={settings:{update:{surflineSpotId:t.surflineSpotId}}}),console.log(Qe({},a)),e.next=9,s({variables:{where:{id:n},data:Qe({},a)}});case 9:(r=e.sent).data&&r.data.updateOneAgency&&r.data.updateOneAgency.id&&D({content:"Agency Updated",variant:"success"}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),D({content:e.t0.message,variant:"error"});case 16:case"end":return e.stop()}},e,null,[[0,13]])}));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(ee.a)(K.a.mark(function e(t){var a;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n){e.next=4;break}return D({content:"Please select an agency to update",variant:"error"}),e.abrupt("return");case 4:return e.next=6,p(t);case 6:(a=e.sent).data&&a.data.resendInviteEmail&&a.data.resendInviteEmail.success&&D({content:"Sent!",variant:"success"}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),D({content:e.t0.message,variant:"error"});case 13:case"end":return e.stop()}},e,null,[[0,10]])}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(z,{withNav:!0,bannerChildren:"User Management",loading:f},r.a.createElement(m.b,{sx:{maxWidth:"1200px",margin:"auto"},py:45},r.a.createElement(m.f,{as:"h1"},"Update Agency"),r.a.createElement(m.b,{py:25},r.a.createElement(m.j,{onChange:function(e){return c(e.target.value)},type:"select",name:"agencyId"},E?r.a.createElement("option",null,"loading..."):y?[r.a.createElement("option",{value:""},"Select an agency")].concat(Object(l.a)(y.agencies.map(function(e){return r.a.createElement("option",{value:e.id},e.name)}))):r.a.createElement("option",null,"No agencies"))),r.a.createElement(m.b,null,w?r.a.createElement(m.k,null):r.a.createElement(m.b,{as:"form",onSubmit:k(R)},r.a.createElement(m.b,{py:25},r.a.createElement(m.h,null,"Name"),r.a.createElement(m.g,{type:"select",name:"name",defaultValue:I.name,ref:A({required:!1,minLength:{value:3,message:"Make sure the name is long enough."}})}),r.a.createElement(at,{error:P.name})),r.a.createElement(m.b,{py:25},r.a.createElement(m.h,null,"Surfline Id"),r.a.createElement(m.g,{type:"select",name:"surflineSpotId",defaultValue:I.surflineSpotId,ref:A({required:!1,minLength:{value:15,message:"Spot ids should looks something like this: 5842041f4e65fad6a77089fa"}})}),r.a.createElement(at,{error:P.surflineSpotId})),r.a.createElement(m.b,{py:25},r.a.createElement(m.c,{block:!0,type:"submit"},b?"Updating...":"Update"))),C&&C.agencies[0].users?r.a.createElement(m.b,{py:25},r.a.createElement("h2",null,"Users "),r.a.createElement(ct,{data:C.agencies[0].users,resendInvite:N}),r.a.createElement(at,{error:P.users})):r.a.createElement(a.Fragment,null))))}var at=function(e){var t=e.error;return t?r.a.createElement(m.b,{color:"red"},t.message):r.a.createElement(a.Fragment,null)};function rt(e){var t=e.columns,n=e.data,a=Object(Me.useTable)({columns:t,data:n}),c=a.getTableProps,o=a.getTableBodyProps,i=a.headerGroups,l=a.rows,s=a.prepareRow;return r.a.createElement("table",c(),r.a.createElement("thead",null,i.map(function(e){return r.a.createElement("tr",e.getHeaderGroupProps(),e.headers.map(function(e){return r.a.createElement("th",e.getHeaderProps(),e.render("Header"))}))})),r.a.createElement("tbody",o(),l.map(function(e,t){return s(e),r.a.createElement("tr",e.getRowProps(),e.cells.map(function(e){return r.a.createElement("td",e.getCellProps(),e.value)}))})))}var ct=function(e){var t=e.data,n=e.resendInvite,c=r.a.useMemo(function(){return[{Header:"Name",accessor:"name"},{Header:"Email",accessor:"email"},{Header:"Role",accessor:"role"},{Header:"Registered",accessor:function(e){return!0===e.isSignedUp?"Yes":"No"}},{Header:"Resend Invite ",accessor:function(e){return!1===e.isSignedUp&&e.email?r.a.createElement(m.c,{onClick:function(){return n({variables:{email:e.email}})},sx:{variant:"link"}},"Resend Invite"):r.a.createElement(a.Fragment,null)}}]},[]),o=r.a.useMemo(function(){return t},[]);return r.a.createElement(ot,null,r.a.createElement(rt,{columns:c,data:o}))},ot=Ge.a.div(qe(),function(e){return e.theme.colors.grayDark}),it={pre:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,null,t)},code:Fe.a};var lt=document.getElementById("root");o.a.render(r.a.createElement(function(){return r.a.createElement(Oe.a,{client:N},r.a.createElement(i.a,{theme:je,components:it},r.a.createElement(ne.a,null,r.a.createElement(me,null,r.a.createElement(h.c,null,r.a.createElement(we,{component:Y,path:"/"}),r.a.createElement(Se,{path:"admin",component:ve}),r.a.createElement(Se,{path:"admin/users",component:Ne}),r.a.createElement(Se,{path:"admin/edit-agency",component:nt}),r.a.createElement(Se,{path:"admin/activity",component:_e}),r.a.createElement(we,{component:ke,path:"/admin/login"}))))))},null),lt)}},[[152,1,2]]]);
//# sourceMappingURL=main.f6ae99cd.chunk.js.map